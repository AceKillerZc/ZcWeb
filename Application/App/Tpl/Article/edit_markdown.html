<extend name="Layout/index" />
<block name="head">

    <link rel="stylesheet" href="__CUBE__/css/libs/datepicker.css" type="text/css" />
    <link rel="stylesheet" href="__CUBE__/css/libs/daterangepicker.css" type="text/css" />
    <link rel="stylesheet" href="__CUBE__/css/libs/bootstrap-timepicker.css" type="text/css" />
    <link rel="stylesheet" href="__CUBE__/css/libs/select2.css" type="text/css" />

    <link rel="stylesheet" href="__MD__/css/editormd.css" />

</block>
<block name="content">

    <div class="row">
        <div class="col-lg-12">
            <div class="main-box">
                <header class="main-box-header clearfix">
                    <h2>Article edit form</h2>
                </header>

                <div class="main-box-body clearfix">
                    <form class="form-horizontal" role="form" action="__URL__/update.html" method="post" id="current_form">
                        <input type="hidden" name="article_id" value="{$Think.get.id}" />
                        <div class="form-group">
                            <label for="form_title" class="col-lg-2 control-label">Title</label>
                            <div class="col-lg-10">
                                <input type="text" class="form-control" id="form_title" placeholder="Title" name="form_title" value="{$article.title}" />
                            </div>

                        </div>

                        <div class="form-group">
                            <label class="col-lg-2 control-label">Category</label>
                            <div class="col-lg-10">
                                <select class="form-control" name="form_category" id="form_category_select">
                                    <volist name="WebsiteCategory" id="WebCategory">
                                        <option value="{$WebCategory.id}">{$WebCategory.name}</option>
                                    </volist>
                                </select>

                            </div>

                        </div>

                        <div class="form-group">
                            <label for="myEditor" class="col-lg-2 control-label">Content</label>
                            <div class="col-lg-10" id="test-editormd" style="width:99%;height:200px;">
                                <textarea class="editormd-markdown-textarea" name="id-markdown-doc">{$article.markdown}</textarea>
                                <!-- html textarea 需要开启配置项 saveHTMLToTextarea == true -->
                                <textarea class="editormd-html-textarea" name="id-html-code"></textarea>
                                <!--<script id="myEditor" name="form_article" type="text/plain" style="width:99%;height:200px;"></script>-->
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="form_tag" class="col-lg-2 control-label">Labels,use , as delimiter</label>
                            <div class="col-lg-10">
                                <input type="text" class="form-control" id="form_tag" placeholder="Labels" name="form_tag" value="{$keyword}"/>
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="col-lg-offset-2 col-lg-10">
                                <button  type="button" onclick="document.getElementById('current_form').submit()" class="btn btn-success">Submit</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</block>
<block name="after">
    <script src="__MD__/examples/js/jquery.min.js"></script>
    <script src="__MD__/editormd.js"></script>
    <!-- this page specific scripts -->
    <script>

        var testEditor;

        $(function() {
            testEditor = editormd("test-editormd", {
                width   : "99%",
                height  : 400,
                syncScrolling : "single",
                path    : "__MD__/lib/",
                tocm            : true,
                saveHTMLToTextarea : true,
                emoji : true,
                taskList : true,
                searchReplace : true,
                codeFold : true,
                imageUpload : true,
                imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
                imageUploadURL : "__MD__/examples/php/upload.php",

            });

            $(function(){
                var id = "{$categoryid}";
                $("#form_category_select").val(id);
            })

        });
    </script>
</block>
